.TH FOCUSCTL 1 "December 2025" "kwin-focus-helper" "User Commands"
.SH NAME
focusctl \- manage kwin-focus-helper forced-focus classes and integration wrappers
.SH SYNOPSIS
.B focusctl
.RI [ GLOBAL\ OPTIONS ] " COMMAND " [ ARGS... ]
.PP
Global options:
.RS
.TP
.BI --uid " UID"
Target this UID's KWin config/session.
.TP
.BI --user " NAME"
Target this user's KWin config/session.
.TP
.B --session-auto
Auto-detect the active graphical session user (root-friendly).
.RE
.PP
Commands:
.RS
.TP
.B list-classes
List stored forced-focus classes.
.TP
.B list-classes \-\-keys
List stored classes with normalized match keys.
.TP
.B list-keys
Show stored value \-> normalized match key.
.TP
.BI add-class " WINDOW_CLASS"
Add a class. Matching is normalized; stored spelling is preserved.
.TP
.BI remove-class " WINDOW_CLASS"
Remove by match key (case-insensitive, ignores trailing .desktop).
.TP
.BI set-classes " LIST"
Replace entire list. Separators: ';' ',' whitespace.
.TP
.B clear
Clear all classes.
.TP
.B enable
Set \fB[Plugins]\fR \fBkwin-focus-helperEnabled=true\fR.
.TP
.B disable
Set \fB[Plugins]\fR \fBkwin-focus-helperEnabled=false\fR.
.TP
.B enabled
Print enabled state: true/false/(unset).
.TP
.B reconfigure
Request KWin to reload configuration via DBus (best-effort).
.RE
.PP
Integration wrapper:
.RS
.TP
.BI "wrap " CLASS " -- " COMMAND " " [ARGS...]
Ensure CLASS is present, optionally enable+reconfigure, then exec COMMAND.
.TP
.BI "wrap --auto -- " COMMAND " " [ARGS...]
Derive class name from argv[0] (e.g. echo -> EchoApp), then proceed.
.TP
.B wrap ... \-\-dry-run
Print intended actions without changing config or exec.
.TP
.B wrap ... \-\-no-enable
Do not set the Plugins enabled flag.
.TP
.B wrap ... \-\-no-reconfigure
Do not request KWin reconfigure.
.RE
.SH DESCRIPTION
\fBfocusctl\fR manages the configuration used by the KWin script \fBkwin-focus-helper\fR.
It edits the KWin config file \fIkwinrc\fR and maintains the key:
.PP
.RS
\fB[Script-kwin-focus-helper]\fR
.br
\fBforceFocusClasses=...\fR
.RE
.PP
Matching is case-insensitive and ignores a trailing \fI.desktop\fR.
Stored values keep the original spelling for readability.
.SH FILES
.TP
.I ~/.config/kwinrc
User KWin configuration file (default target).
.TP
.I ~/.local/share/kwin/scripts/kwin-focus-helper/
Per-user installed script path (typical).
.SH EXAMPLES
Add a class and reload KWin:
.PP
.RS
focusctl add-class google-chrome-stable
.RE
.PP
Integration one-liner:
.PP
.RS
focusctl wrap ProcletChrome -- proclet -- google-chrome-stable
.RE
.PP
Auto class from argv[0]:
.PP
.RS
focusctl wrap --auto -- echo HELLO
.RE
.SH NOTES
If you run \fBfocusctl\fR outside your desktop session (no DBus session),
\fBreconfigure\fR may fail; run inside the session or use \fB--session-auto\fR.
.SH SEE ALSO
.BR kwin (1),
.BR qdbus6 (1),
.BR kpackagetool6 (1)
.SH AUTHOR
darko5r
.SH LICENSE
MIT
